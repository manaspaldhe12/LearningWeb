<html>
<head>

    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css">
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="//code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
    <script type="text/javascript">
        function getphp () {
            //document.write("test");
            xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function() {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    autocomplete(xmlhttp.responseText);
                    datepicker();
                }
            }
            xmlhttp.open("GET","server.php?",true);
            xmlhttp.send();
        };

        function autocomplete (data) {
            var data = data.toString();
            var availableTags = data.split(',');
            var autocompleteData = [];
            for (var i = 0; i < availableTags.length; i++){
                autocompleteData[i] = {};
                autocompleteData[i].value = i.toString();
                autocompleteData[i].label = availableTags[i];
            }
            $("#tags").autocomplete({
                source: autocompleteData,
                select: function (event, ui) {
                    event.preventDefault();
                    $("#tags").val(ui.item.label);
                    printautocomplete(event, ui)
                },
                focus: function(event, ui) {
                    event.preventDefault();
                    $("#tags").val(ui.item.label);
                }
            });
        };

        function printautocomplete (event, ui) {
            console.log(ui);
        }

        function datepicker () {
            $( "#datepicker" ).datepicker();
            datereadthread();
        };

        function datereadthread () {
            var currentDate = $( "#datepicker" ).datepicker( "getDate" );
            if (currentDate){
                console.log(currentDate);
            }else{
                setTimeout(datereadthread, 1000);
            }

        }

    </script>

</head>
<body>
<p id="demo">My First Paragraph</p>
<p id="name"> What is your name? </p>
<div class="ui-widget">
    <label for="tags">Tags: </label>
    <input id="tags">
</div>
<p>Date: <input type="text" id="datepicker"></p>
<script> getphp(); </script>
</body>
</html>
